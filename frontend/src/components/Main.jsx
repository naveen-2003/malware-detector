import { useEffect, useState } from "react";
import CircularProgress from "@mui/material/CircularProgress";
import FileUpload from "./FileUpload";
import Result from "./Result";

const Main = () => {
  const [isFileUploading, setIsFileUploading] = useState(false);
  const [file, setFile] = useState(null);

  const invalidFileTemp = {
    fileName: "AnyDesk.exe",
    fileSize: 5216584,
    fileType: "application/x-msdownload",
    fileHash:
      "55e4ce3fe726043070ecd7de5a74b2459ea8bed19ef2a36ce7884b2ab0863047",
    msg: "Invalid file type, Please provide a PE(.exe) file only.",
    isPE: false,
  };

  const fileInfo = {
    fileName: "malware.exe",
    fileSize: 283648,
    fileType: "application/x-ms-dos-executable",
    fileHash:
      "fedd8446497c630316353017fe0792b158476a2fb5b7994fe5c28cfe6a830e98",
    isPE: true,
    apiModel: "Downloader",
    dllModel: "Spyware",
    peModel: "RAT",
    psModel: "RAT",
    msg: "Success",
  };

  const benignFile = {
    fileName: "sample.exe",
    fileSize: 5003648,
    fileType: "application/x-ms-dos-executable",
    fileHash: "fedd8446497c630316353017f8476a2fb5b7994fe5c28cfe6a",
    isPE: true,
    apiModel: "Benign",
    dllModel: "Benign",
    peModel: "Benign",
    psModel: "Benign",
    msg: "Success",
  };

  const [data, setData] = useState(null);

  return (
    <div className=" flex justify-center align-middle w-full">
      {isFileUploading ? (
        <div className="flex align-middle justify-center">
          <CircularProgress />
        </div>
      ) : data ? (
        <Result data={data} setData={setData} />
      ) : (
        <FileUpload
          setData={setData}
          file={file}
          setFile={setFile}
          setIsFileUploading={setIsFileUploading}
        />
      )}
    </div>
  );
};

export default Main;
