import { useState } from "react";
import analyseImg from "../assets/analyse.gif";
import cleanImg from "../assets/clean.webp";
import threatImg from "../assets/threat.png";
import DatasetModal from "./DatasetModal";

const Result = ({ data, setData }) => {
  // const [isThreatMenuActive, setIsTheatMenuActive] = useState(true);
  const [openModal, setOpenModal] = useState(false);

  const getThreat = (model) => {
    return model === "Benign" ? (
      <div className="text-green-700 font-semibold flex gap-3">
        <img height={20} width={24} src={cleanImg} alt="Safe" />
        <div>Clean</div>
      </div>
    ) : (
      <div className="text-red-700 font-semibold flex gap-3">
        <img height={20} width={24} src={threatImg} alt="Malicious" />
        <div>Threat</div>
      </div>
    );
  };
  return (
    <>
      <DatasetModal
        openModal={openModal}
        closeMoal={() => {
          setOpenModal(false);
        }}
      />
      <div className={`bg-white mx-10 my-auto px-10 py-14 w-full h-full`}>
        <div className="flex justify-center h-full">
          <div className="w-1/3">
            <div className="">
              <img src={analyseImg} alt="Analysing the file" />
            </div>
            <button
              className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl"
              onClick={() => {
                setData(null);
              }}
            >
              Go back
            </button>
          </div>
          <div className="w-2/3 flex flex-col h-full gap-10">
            <div>
              <div className="flex justify-between">
                <div className="text-2xl text-center font-bold text-blue-500">
                  File Information
                </div>
                <button
                  onClick={() => {
                    setOpenModal(true);
                  }}
                  // className="bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-xl"
                  className="text-blue-500 hover:text-blue-700  font-semibold py-2 px-4 rounded-xl"
                >
                  Know More?
                </button>
              </div>
              <div className="flex gap-10">
                <div className="font-bold text-blue-500">
                  <div>Name</div>
                  <div>Size</div>
                  <div>Type</div>
                  <div>SHA256</div>
                </div>
                <div className=" text-gray-700 font-semibold">
                  <div>: {data.fileName}</div>
                  <div>: {(data.fileSize / 1024 / 1024).toFixed(2)}MB</div>
                  <div>: {data.fileType}</div>
                  <div>: {data.fileHash}</div>
                </div>
              </div>
            </div>
            <div className="flex flex-col h-full">
              <div className="flex">
                <div
                  onClick={() => {
                    setIsTheatMenuActive(true);
                  }}
                  className={`bg-[#EFEFEF] px-5 py-3 font-semibold`}
                >
                  Results
                </div>
              </div>
              <div className="bg-[#EFEFEF] h-full ">
                {data.isPE ? (
                  <div className="*:w-1/3 flex h-full *:flex *:flex-col *:justify-evenly px-12 font-medium">
                    <div className="text-black ">
                      <div className="text-blue-500 font-bold">Based On</div>
                      <div>API Used</div>
                      <div>DLL Modules Used</div>
                      <div>PE Headers Used</div>
                      <div>PE Section Used</div>
                    </div>
                    <div>
                      <div className="text-blue-500 font-bold">
                        Threat/Clean
                      </div>
                      <div>{getThreat(data.apiModel)}</div>
                      <div>{getThreat(data.dllModel)}</div>
                      <div>{getThreat(data.peModel)}</div>
                      <div>{getThreat(data.psModel)}</div>
                    </div>
                    <div>
                      <div className="text-blue-500 font-bold">Type</div>
                      <div>{data.apiModel}</div>
                      <div>{data.dllModel}</div>
                      <div>{data.peModel}</div>
                      <div>{data.psModel}</div>
                    </div>
                  </div>
                ) : (
                  <div className="flex justify-center items-center text-xl font-bold text-red-500 h-full ">
                    <div className="">{data.msg}</div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
};

export default Result;
